<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Login</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container">
    <!-- Header başlık kısmı burada olacak-->
    <div class="row text-center ">
        <h1 class="title-center">
            <label th:text="${model.title}"></label>
        </h1>
    </div>
    <!--Header END-->
    <!--Body alanımız-->
    <div class="row">
        <!--Menü Alanı-->
        <div class="col-md-3">
            <ul class="navbar-nav navbar-info bg-info">
                <li class="nav-item" th:each="menu : ${model.menuListesi}">
                    <a class="nav-link" href="#" th:text="${menu}"></a>
                </li>

            </ul>
        </div>
        <!--Menü END-->
        <!--Bilgi giriş ve Tablo Alanı-->
        <div class="col-md-9">
            <!--İnput alanı-->
            <div class="row">
                <form action="save" method="post">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="mb3">
                                <label for="id" class="form-label">ID</label>
                                <input type="text" class="form-control" id="id" name="id">
                            </div>
                            <div class="mb3">
                                <label for="ad" class="form-label">Ürün Adı</label>
                                <input type="text" class="form-control" id="ad" name="ad" required>
                            </div>
                            <div class="mb3">
                                <label for="fiyat" class="form-label">Ürün Fiyatı</label>
                                <input type="text" class="form-control" id="fiyat" name="fiyat" required>
                            </div>
                            <div class="mb3">
                                <label for="barkod" class="form-label">Barkod</label>
                                <input type="text" class="form-control" id="barkod" name="barkod" required>
                            </div>
                            <div class="mb3">
                                <label for="fiyat" class="form-label">KDV</label>
                                <select name="kdv" id="kdv" class="form-select" required>
                                    <option>SEÇİNİZ</option>
                                    <option value="1">%1</option>
                                    <option value="3">%3</option>
                                    <option value="5">%5</option>
                                    <option value="8">%8</option>
                                    <option value="18">%18</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4 text-center">
                            <img src="/img/blank.jpg" alt="Ürün resmi burada olacak" width="300" height="300">
                        </div>
                        <div class="col-md-12 d-grid gap-2 mt-2">
                            <button class="btn btn-primary">K A Y D E T</button>
                        </div>
                    </div>
                </form>

            </div>
            <!--Input END-->
            <!--Tablo Alanı-->
            <div class="row mt-5">
                <table class="table table-hover table-border">
                    <thead class="table-secondary">
                    <tr>
                        <th>Id</th>
                        <th>Ad</th>
                        <th>Fiyat</th>
                        <th>Barkod</th>
                        <th>KDV</th>
                        <th>Resim</th>
                        <th>İşlemler</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="urun : ${model.urunListesi}">
                        <td th:text="${urun.id}"></td>
                        <td th:text="${urun.ad}"></td>
                        <td th:text="${urun.fiyat}"></td>
                        <td th:text="${urun.kdv}"></td>
                        <td th:text="${urun.barkod}"></td>
                        <td>
                            <img src="/img/blankproduct.jpg" alt="Ürün resmi" width="50px" height="50px">
                        </td>
                        <td>
                            <a href="#" class="btn btn-primary">
                                Düzenle
                            </a>
                            <!-- Thymeleafte ONCLICK metodu işe yaramaz o yüzden th:attr kullanmamız gerekiyor. -->
                            <a href="#" class="btn btn-danger" th:attr="onclick=|sil(${urun.id})|">
                                Sil
                            </a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <!--Tablo END-->
        </div>
        <!--Bilgi giriş ve tablo END-->
    </div>
    <!--Body END-->
</div>

<div hidden="">
    <form action="delete" method="post">
        <input type="text" name="id" id="deleteid">
        <button type="submit" id="deletebutton"></button>
    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    function sil(id) {
        const deleteid = document.getElementById('deleteid');
        deleteid.text = id;
        const deletebutton = document.getElementById('deletebutton')
        Swal.fire({
            title: 'Are you sure?',
            text: "You won't be able to revert this!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, delete it!'
        }).then((result) => {
            if (result.isConfirmed) {
                deletebutton.click();
                Swal.fire('Deleted!', 'Your file has been deleted.', 'success')
            }
        })
    }
</script>
</body>
</html>